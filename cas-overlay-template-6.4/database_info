/*
 * stores all the registered user
 */
CREATE TABLE IF NOT EXISTS users
(
/* user_id, machine generated, immutable, once created cannot be changed */
user_id VARCHAR(64) NOT NULL,
/* title */
title VARCHAR(128),
/* first name */
first_name VARCHAR(128),
/* last name */
last_name VARCHAR(128),
/* primary email (for authentication) */
 email VARCHAR(64) NOT NULL,
/* other email addresses (comma separated) */
secondary_emails VARCHAR(256),
/* contact numbers (comma separated) */
phone_number VARCHAR(128) DEFAULT NULL,
/* fax numbers (comma separated) */
fax_number VARCHAR(128),
/* street address */
address BYTEA DEFAULT NULL,
/* zip/pin code */
postal_code VARCHAR(32),
/* city */
city_name VARCHAR(64),
/* state */
state_name VARCHAR(64),
/* country */
country_name VARCHAR(64),
/* password, salted(4bytes) md5 hash(32 bytes) - needed for external user, internal user can be validated through LDAP etc */
password VARCHAR(256) NOT NULL,
/* Is the user interested in receiving email notifications? Active --> Send mails; DoNotDisturb --> Do not send mails */
mail_subscription_state varchar(32) NOT NULL DEFAULT 'Active',
/* for access control on user update. Admin --> can update any user; Regular --> can update only self */
role varchar(32) NOT NULL DEFAULT 'Regular',
/* status of the user (Active, Inactive, Suspended, Deleted) */
status varchar(32) NOT NULL DEFAULT 'Inactive',
/* user creation time */
creation_time TIMESTAMP WITHOUT TIME ZONE NOT NULL,
/* user entry modification time */
modification_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY (user_id),
UNIQUE (email)
);
